<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Chá de Cozinha - Mel & Max</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .bg-olive { background-color: #6b8e23; }
    .text-olive { color: #6b8e23; }
    button { cursor: pointer; }
  </style>
</head>
<body class="min-h-screen flex flex-col items-center py-10 bg-gray-100">

  <header class="mb-6 text-center">
    <h1 class="text-4xl font-bold text-olive">Chá de Cozinha - Mel & Max</h1>
    <p class="text-lg mt-2 text-gray-700">Escolha um presente ou veja os já confirmados.</p>
  </header>

  <!-- Botões de navegação -->
  <div class="flex space-x-4 mb-6">
    <button onclick="mostrarAba('presentes')" class="bg-olive text-white px-4 py-2 rounded">Escolher Presente</button>
    <button onclick="mostrarAba('confirmados')" class="bg-olive text-white px-4 py-2 rounded">Presentes Confirmados</button>
  </div>

  <!-- Aba: Escolher Presente -->
  <main id="aba-presentes" class="w-full max-w-3xl px-4">
    <div class="mb-6">
      <label class="block mb-2 text-gray-700 font-semibold">Seu nome:</label>
      <input id="nomeConvidado" type="text" placeholder="Ex.: Ana Silva" class="w-full px-3 py-2 border rounded-lg">
    </div>
    <div id="listaPresentes" class="space-y-8"></div>
  </main>

  <!-- Aba: Presentes Confirmados -->
  <main id="aba-confirmados" class="w-full max-w-3xl px-4 hidden">
    <h2 class="text-2xl font-semibold text-olive mb-4">Presentes Confirmados</h2>
    <div id="listaConfirmados" class="space-y-4"></div>
  </main>

  <script>
    const categorias = {
      "Eletrodomésticos": ["Liquidificador (Oster)", "Sanduicheira (Oster)"],
      "Utensílios de Cozinha": ["Fouê", "Rolo para abrir massa"],
      "Louças": ["Jogo de xícaras", "Jarras de vidro"]
    };

    let confirmados = []; // Armazena localmente

    function mostrarAba(aba) {
      document.getElementById('aba-presentes').classList.add('hidden');
      document.getElementById('aba-confirmados').classList.add('hidden');
      document.getElementById(`aba-${aba}`).classList.remove('hidden');
      if (aba === 'confirmados') renderConfirmados();
    }

    function renderLista() {
      const container = document.getElementById('listaPresentes');
      container.innerHTML = '';

      Object.keys(categorias).forEach(cat => {
        const sec = document.createElement('section');
        sec.className = "bg-white shadow-md rounded-xl p-6";
        const header = document.createElement('h2');
        header.className = "text-xl font-bold text-olive mb-4";
        header.textContent = cat;

        const lista = document.createElement('ul');
        lista.className = "space-y-3";

        categorias[cat].forEach(item => {
          const jaConfirmado = confirmados.find(c => c.item === item);
          if (jaConfirmado) return; // Pula se já está reservado

          const li = document.createElement('li');
          li.className = "flex justify-between items-center border-b pb-2";

          const nomeItem = document.createElement('span');
          nomeItem.textContent = item;

          const btn = document.createElement('button');
          btn.className = "px-3 py-1 rounded-lg text-white bg-olive hover:bg-green-700";
          btn.textContent = "Confirmar";
          btn.onclick = () => confirmarItem(item, cat);

          li.appendChild(nomeItem);
          li.appendChild(btn);
          lista.appendChild(li);
        });

        sec.appendChild(header);
        sec.appendChild(lista);
        container.appendChild(sec);
      });
    }

    function confirmarItem(item, categoria) {
      const nome = document.getElementById('nomeConvidado').value.trim();
      if (!nome) {
        alert('Digite seu nome antes de confirmar.');
        return;
      }

      confirmados.push({ nome, item, categoria });
      alert(`Item "${item}" reservado com sucesso!`);
      renderLista();
    }

    function renderConfirmados() {
      const container = document.getElementById('listaConfirmados');
      container.innerHTML = '';

      if (confirmados.length === 0) {
        container.innerHTML = '<p class="text-gray-500">Nenhum presente confirmado ainda.</p>';
        return;
      }

      confirmados.forEach((conf, index) => {
        const div = document.createElement('div');
        div.className = "bg-white shadow-md p-4 rounded flex justify-between items-center";

        const info = document.createElement('span');
        info.textContent = `${conf.nome} — ${conf.item}`;

        const btn = document.createElement('button');
        btn.textContent = "Cancelar";
        btn.className = "px-3 py-1 rounded bg-red-500 text-white hover:bg-red-600";
        btn.onclick = () => {
          confirmados.splice(index, 1);
          renderLista();
          renderConfirmados();
        };

        div.appendChild(info);
        div.appendChild(btn);
        container.appendChild(div);
      });
    }

    // Inicializa tudo
    renderLista();
  </script>

</body>
</html>
