<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Chá de Panela — Reserva de Presentes</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; }
    .container { max-width: 600px; margin: auto; background: #fff; border-radius: 10px; box-shadow: 0 2px 12px #ddd; padding: 30px; }
    h1 { color: #8a4baf; }
    .tabs { display: flex; justify-content: center; margin-bottom: 24px; }
    .tab-btn { flex: 1; background: #eee; border: none; padding: 10px; font-size: 1em; cursor: pointer; border-radius: 5px 5px 0 0; margin: 0 2px; }
    .tab-btn.active { background: #8a4baf; color: #fff; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    .presente-list { margin-top: 10px;}
    .presente-item { padding: 8px 0; border-bottom: 1px solid #ececec; display: flex; justify-content: space-between; align-items: center;}
    .presente-nome { font-weight: bold; }
    .categoria { font-size: 0.95em; color: #777; }
    .reservado { color: #8a4baf; font-style: italic; margin-left:6px; }
    .reservar-form { display: flex; gap: 10px; margin-top: 14px; align-items: center;}
    .reservar-form input { padding: 6px; font-size: 1em; border-radius: 4px; border: 1px solid #ccc;}
    .reservar-form button { padding: 7px 14px; background: #8a4baf; color: #fff; border-radius: 5px; border: none; cursor: pointer;}
    .reservar-form button:hover { background: #6c398c; }
    .devolver-btn { background: #e74c3c; color: #fff; border: none; border-radius: 5px; padding: 5px 10px; cursor: pointer;}
    .devolver-btn:hover { background: #c0392b; }
    .msg { margin-top: 10px; color: #6c398c; text-align: center; font-size: 1em;}
    @media (max-width:700px) {
      .container { max-width: 98vw; padding: 6vw 2vw; }
      .tabs { flex-direction: column; }
      .tab-btn { margin-bottom: 4px; border-radius: 5px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Chá de Panela</h1>
    <div class="tabs">
      <button class="tab-btn active" onclick="showTab('reservar')">Reservar Presente</button>
      <button class="tab-btn" onclick="showTab('reservados')">Presentes Reservados</button>
    </div>
    <!-- Reservar presente -->
    <div id="reservar" class="tab-content active">
      <div class="presente-list" id="presente-list"></div>
      <div class="msg" id="msg-reservar"></div>
    </div>
    <!-- Presentes reservados -->
    <div id="reservados" class="tab-content">
      <div class="presente-list" id="reservados-list"></div>
      <div class="msg" id="msg-reservados"></div>
    </div>
  </div>
  <script>
    // Exemplo de presentes (adicione ou edite como quiser)
    const PRESENTES = [
      { nome: "Jogo de Toalhas", categoria: "Banheiro" },
      { nome: "Conjunto de Panelas", categoria: "Cozinha" },
      { nome: "Jarra de Vidro", categoria: "Cozinha" },
      { nome: "Prato Decorativo", categoria: "Mesa" },
      { nome: "Avental", categoria: "Cozinha" },
      { nome: "Tapete", categoria: "Sala" }
    ];

    // Salva e carrega as reservas no localStorage
    function getReservados() {
      try {
        return JSON.parse(localStorage.getItem('reservados')) || {};
      } catch { return {}; }
    }
    function setReservados(obj) {
      localStorage.setItem('reservados', JSON.stringify(obj));
    }

    // Tabs
    function showTab(tab) {
      document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(tabc => tabc.classList.remove('active'));
      document.querySelector(`.tab-btn[onclick*="${tab}"]`).classList.add('active');
      document.getElementById(tab).classList.add('active');
      if (tab === 'reservar') renderReservar();
      else renderReservados();
    }

    // Renderiza aba de reservar presente
    function renderReservar() {
      const reservados = getReservados();
      const div = document.getElementById('presente-list');
      div.innerHTML = '';
      PRESENTES.forEach((p, idx) => {
        const reservadoPor = reservados[p.nome];
        const itemDiv = document.createElement('div');
        itemDiv.className = 'presente-item';
        itemDiv.innerHTML = `
          <div>
            <span class="presente-nome">${p.nome}</span>
            <span class="categoria">(${p.categoria})</span>
            ${reservadoPor ? `<span class="reservado">Reservado por ${reservadoPor}</span>` : ""}
          </div>
          ${!reservadoPor ? `
            <form class="reservar-form" onsubmit="reservar(event, '${p.nome}')">
              <input required maxlength="20" type="text" placeholder="Seu nome">
              <button type="submit">Reservar</button>
            </form>
          ` : ""}
        `;
        div.appendChild(itemDiv);
      });
      document.getElementById('msg-reservar').innerText = '';
    }

    // Função para reservar presente
    function reservar(e, nomePresente) {
      e.preventDefault();
      const reservados = getReservados();
      if (reservados[nomePresente]) return; // já reservado
      const nome = e.target.querySelector('input').value.trim();
      if (!nome) return;
      reservados[nomePresente] = nome;
      setReservados(reservados);
      renderReservar();
      document.getElementById('msg-reservar').innerText = `Presente reservado por ${nome}!`;
    }

    // Renderiza aba de reservados
    function renderReservados() {
      const reservados = getReservados();
      const div = document.getElementById('reservados-list');
      div.innerHTML = '';
      let temReservados = false;
      PRESENTES.forEach((p, idx) => {
        const reservadoPor = reservados[p.nome];
        if (reservadoPor) {
          temReservados = true;
          const itemDiv = document.createElement('div');
          itemDiv.className = 'presente-item';
          itemDiv.innerHTML = `
            <div>
              <span class="presente-nome">${p.nome}</span>
              <span class="categoria">(${p.categoria})</span>
              <span class="reservado">por ${reservadoPor}</span>
            </div>
            <button class="devolver-btn" onclick="devolver('${p.nome}')">Devolver</button>
          `;
          div.appendChild(itemDiv);
        }
      });
      if (!temReservados) {
        div.innerHTML = '<p class="vazio">Nenhum presente reservado ainda.</p>';
      }
      document.getElementById('msg-reservados').innerText = '';
    }

    // Função para devolver presente
    function devolver(nomePresente) {
      const reservados = getReservados();
      if (!reservados[nomePresente]) return;
      delete reservados[nomePresente];
      setReservados(reservados);
      renderReservados();
      document.getElementById('msg-reservados').innerText = `Presente devolvido!`;
      renderReservar(); // atualiza a outra aba também
    }

    // Inicialização
    renderReservar();
  </script>
</body>
</html>
